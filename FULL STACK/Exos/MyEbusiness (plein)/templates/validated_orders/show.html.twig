{% extends 'base.html.twig' %}

{% block title %}Validated Order n°{{ order_id }}
{% endblock %}

{% block body %}
<div class="container">
	<h1 class="text-center text-light mt-3 mb-5">Votre commande n° :
		{{ order_id }}</h1>
	<h3 class="text-center mb-3">Date de commande :
		{{ orderDate|format_datetime('short', 'none', locale='fr') }}</h3>
	{% if shipped == 1 %}<br>
		<h3 class="text-center mb-3">Date d'expédition :
			{{ shipmentDate|format_datetime('short', 'none', locale='fr') }}</h3>
		<br><h3 class="text-center mb-3">Transporteur :
			{{ carrier }}</h3>
		<br><h3 class="text-center mb-3">N° de suivi :
			{{ carrierShipmentId }}</h3>
	{% endif %}

	<table class="table table-dark">
		<thead>
			<tr class="text-primary">
				<th>Produit</th>
				<th>Prix</th>
				<th>Quantité</th>
				<th>Sous-total</th>
			</tr>
		</thead>
		<tbody>
			{% set totals = 0 %}
			{% for detail in details %}
				<tr>
					<td>{{detail.Product.name}}</td>
					<td>{{detail.Product.price}}</td>
					<td>{{detail.Quantity}}</td>
					<td>{{detail.Product.price * detail.Quantity}}
						€</td>
				</tr>
			</td>
		</tbody>
	</tr>
	{% set totals = totals + detail.Product.price * detail.Quantity %}
{% endfor %}</tbody><tfoot>
<tr>
	<td colspan="3" class="text-right">
		<b>Total :</b>
	</td>
	<td>{{ totals }}
		€</td>
</tr></tfoot></table>{% if (shipped == 0) and (is_granted('ROLE_ADMIN')) %}<div class="d-flex justify-content-center">
<div class="card border-secondary bg-dark text-light mb-5 mt-3 rounded" style="width: 30rem;">
	<i class="fa-solid fa-address-card fa-lg text-center mt-3"></i>
	<div class="card-body">
		<h5 class="card-title text-info text-center">{{ user.email }}</h5>
		<p class="card-text text-secondary text-center">
			<i>Informations personnelles du client</i>
		</p>
	</div>
	<ul class="list-group list-group-flush">
		<li class="list-group-item bg-dark text-light">
			<b>Prénom :</b>
			{{ user.userName }}</li>
		<li class="list-group-item bg-dark text-light">
			<b>NomLast name :</b>
			{{ user.userLastname }}</li>
		<li class="list-group-item bg-dark text-light">
			<b>Date de naissance :</b>
			{{ user.birthdate ? app.user.birthdate|date('d-m-Y') : '' }}</li>
		<li class="list-group-item bg-dark text-light">
			<b>Adresse :</b>
			{{ user.adress }}</li>
		<li class="list-group-item bg-dark text-light">
			<b>N° téléphone :</b>
			{{ user.phoneNumber }}</li>
		<li class="list-group-item bg-dark text-light">
			<b>Votre compte est vérifié :</b>
			{{ user.isVerified ? 'Oui' : 'Non' }}</li>
	</ul>
</div></div></div><div class="text-center"><button class="btn btn-lg btn-warning mb-3">
<a class="text-decoration-none text-dark" href="{{ path('app_shipped_order', {'id': cart_id}) }}">Commande expédiée</a></button></div>{% endif %}
<div class="text-center">
    <button class="btn btn-primary border-light mb-1" onclick="history.back()">Retour</button>
	</div>
</div>{% endblock %}
